{"version":3,"sources":["webpack:///./resources/js/react/component/AuthHandler.js","webpack:///./resources/js/react/component/Dashboard.js"],"names":["AuthHandler","statusCode","Dashboard","props","state","users","usersLoaded","noData","getUserList","bind","deleteHandler","axiosGet","baseUrl","then","status","message","data","setState","isLoggedOut","toastr","error","id","Swal","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","result","value","axiosDelete","updateLogout","this","TableContainer","loaded","userInfo","Component","className","Table","rows","map","obj","index","TableRow","rowData","key","role","name","email","to","type","onClick"],"mappings":"+JAAe,SAASA,EAAYC,GAChC,OAAuB,MAAfA,E,kzBCeSC,E,YAEpB,WAAYC,GAAO,M,IAAA,O,4FAAA,S,EAClB,U,EAAA,eAAMA,K,8CACDC,MAAQ,CACZC,MAAQ,GACRC,aAAc,EAEdC,QAAS,GAGV,EAAKC,YAAc,EAAKA,YAAYC,KAAjB,MAEnB,EAAKC,cAAgB,EAAKA,cAAcD,KAAnB,MAXH,E,qSAcL,WAEbE,YAAS,GAAD,OAAIC,IAAJ,WACPC,MAAK,YAAyC,IAAvCC,EAAuC,EAAvCA,OAAQC,EAA+B,EAA/BA,QAASC,EAAsB,EAAtBA,KACRhB,EAD8B,EAAhBC,aAG7B,EAAKgB,SAAS,CAAEC,aAAa,IAEhB,YAAXJ,EACF,EAAKG,SAAS,CAAEZ,MAAOW,EAAMV,aAAa,EAAMC,QAAQ,KAExD,EAAKU,SAAS,CAAEZ,MAAOW,EAAMV,aAAa,EAAMC,QAAQ,IACxDY,OAAOC,MAAML,S,sCAgBK,WAAPM,EAAO,uDAAJ,GAEhBC,IAAKC,KAAK,CACTC,MAAO,gBACPC,KAAM,qBACNC,KAAM,UACNC,kBAAkB,EAClBC,kBAAmB,kBACnBC,iBAAkB,gBACdhB,MAAK,SAACiB,GACLA,EAAOC,OACXC,YAAY,GAAD,OAAIpB,IAAJ,kBAAqBS,IAC/BR,MAAK,YAAyC,IAAvCC,EAAuC,EAAvCA,OAAQC,EAA+B,EAA/BA,QAA+B,EAAtBC,KACRhB,EAD8B,EAAhBC,aAG7B,EAAKE,MAAM8B,eAGE,YAAXnB,GACF,EAAKN,cAENW,OAAOC,MAAML,W,0CAQbmB,KAAK1B,gB,+BAQR,OACC,6BAEC,kBAAC2B,EAAD,CAAgB9B,MAAS6B,KAAK9B,MAAMC,MAChC+B,OAAUF,KAAK9B,MAAME,YACrBC,OAAU2B,KAAK9B,MAAMG,OACrBG,cAAiBwB,KAAKxB,cACtB2B,SAAYH,KAAK/B,MAAMkC,iB,8BAxFQC,aA+FvC,SAASH,EAAehC,GACvB,OAAQ,yBAAKoC,UAAU,QACvB,yBAAKA,UAAU,OACd,yBAAKA,UAAU,UACd,yCACA,kBAACC,EAAD,CAAOnC,MAAOF,EAAME,MAAO+B,OAAQjC,EAAMiC,OAAQ7B,OAAUJ,EAAMI,OAAQG,cAAeP,EAAMO,cAC9F2B,SAAYlC,EAAMkC,cAOrB,SAASG,EAAMrC,GAEd,IAAMsC,EAAQtC,EAAMiC,OAAYjC,EAAMI,OAAW,4BAAI,8CAAgCJ,EAAME,MAAMqC,KAAI,SAASC,EAAKC,GAClH,OAAQ,kBAACC,EAAD,CAAUC,QAASH,EAAKI,IAAKJ,EAAItB,GAAIX,cAAeP,EAAMO,cAAe2B,SAAYlC,EAAMkC,cAC7F,4BAAI,2CAEX,OACC,2BAAOE,UAAU,SAChB,+BACA,4BACC,kCACA,oCACA,qCACA,oCACA,+BAGD,+BACEE,IAML,SAASI,EAAS1C,GAAO,IACL6C,EAAS7C,EAArBkC,SAAYW,KACnB,OAAQ,4BACL,4BAAK7C,EAAM2C,QAAQzB,IACnB,4BAAKlB,EAAM2C,QAAQG,MACnB,4BAAK9C,EAAM2C,QAAQI,OACnB,4BAAK/C,EAAM2C,QAAQE,MACnB,4BACC,kBAAC,IAAD,CAAMG,GAAE,yBAAoBhD,EAAM2C,QAAQzB,IAAMkB,UAAU,mBAA1D,QACES,GAAkB,WAATA,GAAsB,4BAAQI,KAAK,SAASb,UAAU,sBAAsBc,QAAS,kBAAMlD,EAAMO,cAAcP,EAAM2C,QAAQzB,MAAvG","file":"6.js","sourcesContent":["export default function AuthHandler(statusCode) {\r\n    return (statusCode === 401);\r\n}","import React, {Component} from 'react';\r\nimport {axiosPost, axiosPut, axiosGet, axiosDelete, baseUrl} from './../axiosCall';\r\nimport {\r\n\tSwitch,\r\n\tRoute,\r\n\tLink,\r\n\tRedirect,\r\n\tuseRouteMatch,\r\n\tuseParams\r\n  } from \"react-router-dom\";\r\n\r\nimport './../../../../node_modules/toastr/build/toastr.css';\r\nimport AuthHandler from './AuthHandler';\r\nimport Swal from 'sweetalert2';\r\nimport Header from './Header';\r\n\r\nexport default class Dashboard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tusers : [],\r\n\t\t\tusersLoaded : false,\r\n\t\t\t//isLoggedOut : false,\r\n\t\t\tnoData : false\r\n\t\t}\r\n\r\n\t\tthis.getUserList = this.getUserList.bind(this);\r\n\t\t//this.logoutHandler = this.logoutHandler.bind(this);\r\n\t\tthis.deleteHandler = this.deleteHandler.bind(this);\r\n\t}\r\n\r\n\tgetUserList() {\r\n\r\n\t\taxiosGet(`${baseUrl}/users`)\r\n\t\t.then(({status, message, data, statusCode}) => {\r\n\t\t\tconst isGuest = AuthHandler(statusCode);\r\n\t\t\tif(isGuest)\r\n\t\t\t\tthis.setState({ isLoggedOut: true});\r\n\t\t\t\t\t\r\n\t\t\tif(status === 'success'){\r\n\t\t\t\tthis.setState({ users: data, usersLoaded: true, noData: false});\r\n\t\t\t}else{\r\n\t\t\t\tthis.setState({ users: data, usersLoaded: true, noData: true});\r\n\t\t\t\ttoastr.error(message);\r\n\t\t\t}\r\n\t\t });\r\n\t}\r\n\r\n\t/*logoutHandler() {\r\n\t\taxiosGet(`${baseUrl}/logout`)\r\n\t\t.then(({status, message, data = ''}) => {\t\t\t\r\n\t\t\tif(status == 'success'){\r\n\t\t\t\tthis.setState({ isLoggedOut: true});\r\n\t\t\t}else{\r\n\t\t\t\ttoastr.error(message);\r\n\t\t\t}\r\n\t\t });\r\n\t}*/\r\n\r\n\tdeleteHandler(id='') {\r\n\r\n\t\tSwal.fire({\r\n\t\t\ttitle: 'Are you sure?',\r\n\t\t\ttext: 'You want to delete',\r\n\t\t\ticon: 'warning',\r\n\t\t\tshowCancelButton: true,\r\n\t\t\tconfirmButtonText: 'Yes, delete it!',\r\n\t\t\tcancelButtonText: 'No, keep it'\r\n\t\t  }).then((result) => {\r\n\t\t\t  if(result.value){\r\n\t\t\t\taxiosDelete(`${baseUrl}/users/${id}`)\r\n\t\t\t\t.then(({status, message, data, statusCode}) => {\r\n\t\t\t\t\tconst isGuest = AuthHandler(statusCode);\r\n\t\t\t\t\tif(isGuest)\r\n\t\t\t\t\t\tthis.props.updateLogout();\r\n\t\t\t\t\t\t//this.setState({ isLoggedOut: true});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\tif(status === 'success'){\r\n\t\t\t\t\t\tthis.getUserList();\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttoastr.error(message);\r\n\t\t\t\t });\r\n\t\t\t  }\r\n\t\t  })\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t    this.getUserList();\r\n\t  }\r\n\r\n\r\n\trender() {\r\n/*\t\tif(this.state.isLoggedOut)\r\n\t\t\treturn <Redirect to=\"/\" />*/\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{/* <Header logoutHandler = {this.logoutHandler}/> */}\r\n\t\t\t\t<TableContainer users = {this.state.users} \r\n\t\t\t\t\t\t\t\tloaded = {this.state.usersLoaded} \r\n\t\t\t\t\t\t\t\tnoData = {this.state.noData} \r\n\t\t\t\t\t\t\t\tdeleteHandler = {this.deleteHandler} \r\n\t\t\t\t\t\t\t\tuserInfo = {this.props.userInfo}/>\r\n\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n\r\n}\r\n\r\nfunction TableContainer(props) {\r\n\treturn (<div className=\"mt-3\">\r\n\t<div className=\"row\">\r\n\t\t<div className=\"col-12\">\r\n\t\t\t<h2>Dashboard</h2>\r\n\t\t\t<Table users={props.users} loaded={props.loaded} noData = {props.noData} deleteHandler={props.deleteHandler}\r\n\t\t\tuserInfo = {props.userInfo}/>\r\n\t\t</div>\r\n\t</div>\t\t\t\t\r\n</div>);\r\n}\r\n\r\n\r\nfunction Table(props) {\r\n\r\n\tconst rows = (props.loaded) ? ((props.noData) ? (<tr><td>No data found</td></tr>) : (props.users.map(function(obj, index) {\r\n\t\treturn (<TableRow rowData={obj} key={obj.id} deleteHandler={props.deleteHandler} userInfo = {props.userInfo}/>)\r\n\t}))): (<tr><td>Loading...</td></tr>);\r\n\r\n\treturn (\r\n\t\t<table className=\"table\">\r\n\t\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<th>Id</th>\r\n\t\t\t\t<th>Name</th>\r\n\t\t\t\t<th>Email</th>\r\n\t\t\t\t<th>Role</th>\r\n\t\t\t\t<th></th>\r\n\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t{rows}\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t);\r\n}\r\n\r\nfunction TableRow(props) {\r\n\tconst {userInfo : {role}} = props;\r\n\treturn (<tr>\r\n\t\t\t\t<td>{props.rowData.id}</td>\r\n\t\t\t\t<td>{props.rowData.name}</td>\r\n\t\t\t\t<td>{props.rowData.email}</td>\r\n\t\t\t\t<td>{props.rowData.role}</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<Link to={`/users/profile/${props.rowData.id}`} className=\"btn btn-primary\">View</Link>\r\n\t\t\t\t\t{(role && (role === 'parent') && <button type=\"button\" className=\"btn btn-danger ml-1\" onClick={() => props.deleteHandler(props.rowData.id)}>Delete</button>)}\r\n\t\t\t\t\t\r\n\t\t\t\t</td>\r\n\r\n\t\t\t</tr>)\r\n}"],"sourceRoot":""}