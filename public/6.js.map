{"version":3,"sources":["webpack:///./resources/js/react/component/AuthHandler.js","webpack:///./resources/js/react/component/Dashboard.js"],"names":["AuthHandler","statusCode","Dashboard","props","state","users","usersLoaded","noData","getUserList","bind","deleteHandler","axiosGet","baseUrl","status","message","data","this","setState","isLoggedOut","toastr","error","id","Swal","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","value","axiosDelete","updateLogout","TableContainer","loaded","userInfo","Component","className","Table","rows","map","obj","index","TableRow","rowData","key","role","name","email","to","type","onClick"],"mappings":"oLAAe,SAASA,EAAYC,GAChC,OAAuB,MAAfA,E,omCCUSC,E,YAEpB,WAAYC,GAAO,M,IAAA,O,4FAAA,S,EAClB,U,EAAA,eAAMA,K,8CACDC,MAAQ,CACZC,MAAQ,GACRC,aAAc,EACdC,QAAS,GAGV,EAAKC,YAAc,EAAKA,YAAYC,KAAjB,MACnB,EAAKC,cAAgB,EAAKA,cAAcD,KAAnB,MATH,E,uZAcgCE,YAAS,GAAD,OAAIC,IAAJ,W,gBAAnDC,E,EAAAA,OAAQC,E,EAAAA,QAASC,E,EAAAA,KACRf,E,EADcC,aAG7Be,KAAKC,SAAS,CAAEC,aAAa,IAEhB,YAAXL,EACFG,KAAKC,SAAS,CAAEZ,MAAOU,EAAMT,aAAa,EAAMC,QAAQ,KAExDS,KAAKC,SAAS,CAAEZ,MAAOU,EAAMT,aAAa,EAAMC,QAAQ,IACxDY,OAAOC,MAAMN,I,qPAKKO,E,+BAAG,G,SAEaC,IAAKC,KAAK,CAC3CC,MAAO,gBACPC,KAAM,qBACNC,KAAM,UACNC,kBAAkB,EAClBC,kBAAmB,kBACnBC,iBAAkB,gB,kBANbC,M,iCAS4CC,YAAY,GAAD,OAAInB,IAAJ,kBAAqBS,I,gBAA3ER,E,EAAAA,OAAQC,E,EAAAA,Q,EAASC,KACRf,E,EADcC,aAG7Be,KAAKb,MAAM6B,eAEE,YAAXnB,GACFG,KAAKR,cAENW,OAAOC,MAAMN,G,wIAKXE,KAAKR,gB,+BAKR,OACC,6BACC,kBAACyB,EAAD,CAAgB5B,MAASW,KAAKZ,MAAMC,MAChC6B,OAAUlB,KAAKZ,MAAME,YACrBC,OAAUS,KAAKZ,MAAMG,OACrBG,cAAiBM,KAAKN,cACtByB,SAAYnB,KAAKb,MAAMgC,iB,8BAjEQC,aAwEvC,SAASH,EAAe9B,GACvB,OAAQ,yBAAKkC,UAAU,QACvB,yBAAKA,UAAU,OACd,yBAAKA,UAAU,UACd,yCACA,kBAACC,EAAD,CAAOjC,MAAOF,EAAME,MAAO6B,OAAQ/B,EAAM+B,OAAQ3B,OAAUJ,EAAMI,OAAQG,cAAeP,EAAMO,cAC9FyB,SAAYhC,EAAMgC,cAOrB,SAASG,EAAMnC,GAEd,IAAMoC,EAAQpC,EAAM+B,OAAY/B,EAAMI,OAAW,4BAAI,8CAAgCJ,EAAME,MAAMmC,KAAI,SAASC,EAAKC,GAClH,OAAQ,kBAACC,EAAD,CAAUC,QAASH,EAAKI,IAAKJ,EAAIpB,GAAIX,cAAeP,EAAMO,cAAeyB,SAAYhC,EAAMgC,cAC7F,4BAAI,2CAEX,OACC,2BAAOE,UAAU,SAChB,+BACA,4BACC,kCACA,oCACA,qCACA,oCACA,+BAGD,+BACEE,IAML,SAASI,EAASxC,GAAO,IACL2C,EAAS3C,EAArBgC,SAAYW,KACnB,OAAQ,4BACL,4BAAK3C,EAAMyC,QAAQvB,IACnB,4BAAKlB,EAAMyC,QAAQG,MACnB,4BAAK5C,EAAMyC,QAAQI,OACnB,4BAAK7C,EAAMyC,QAAQE,MACnB,4BACC,kBAAC,IAAD,CAAMG,GAAE,yBAAoB9C,EAAMyC,QAAQvB,IAAMgB,UAAU,mBAA1D,QACES,GAAkB,WAATA,GAAsB,4BAAQI,KAAK,SAASb,UAAU,sBAAsBc,QAAS,kBAAMhD,EAAMO,cAAcP,EAAMyC,QAAQvB,MAAvG","file":"6.js","sourcesContent":["export default function AuthHandler(statusCode) {\r\n    return (statusCode === 401);\r\n}","import React, {Component} from 'react';\r\nimport {axiosPost, axiosPut, axiosGet, axiosDelete, baseUrl} from './../axiosCall';\r\nimport {\r\n\tLink,\r\n\tRedirect\r\n  } from \"react-router-dom\";\r\n\r\nimport './../../../../node_modules/toastr/build/toastr.css';\r\nimport AuthHandler from './AuthHandler';\r\nimport Swal from 'sweetalert2';\r\n\r\nexport default class Dashboard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tusers : [],\r\n\t\t\tusersLoaded : false,\r\n\t\t\tnoData : false\r\n\t\t}\r\n\r\n\t\tthis.getUserList = this.getUserList.bind(this);\r\n\t\tthis.deleteHandler = this.deleteHandler.bind(this);\r\n\t}\r\n\r\n\tasync getUserList() {\r\n\r\n\t\tconst {status, message, data, statusCode} = await axiosGet(`${baseUrl}/users`);\r\n\t\tconst isGuest = AuthHandler(statusCode);\r\n\t\tif(isGuest)\r\n\t\t\tthis.setState({ isLoggedOut: true});\r\n\t\t\t\t\r\n\t\tif(status === 'success'){\r\n\t\t\tthis.setState({ users: data, usersLoaded: true, noData: false});\r\n\t\t}else{\r\n\t\t\tthis.setState({ users: data, usersLoaded: true, noData: true});\r\n\t\t\ttoastr.error(message);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tasync deleteHandler(id='') {\r\n\r\n\t\tconst {value:confirmation} = await Swal.fire({\r\n\t\t\t\ttitle: 'Are you sure?',\r\n\t\t\t\ttext: 'You want to delete',\r\n\t\t\t\ticon: 'warning',\r\n\t\t\t\tshowCancelButton: true,\r\n\t\t\t\tconfirmButtonText: 'Yes, delete it!',\r\n\t\t\t\tcancelButtonText: 'No, keep it'\r\n\t\t\t});\r\n\t\tif(confirmation){\r\n\t\t\tconst {status, message, data, statusCode} = await axiosDelete(`${baseUrl}/users/${id}`);\r\n\t\t\tconst isGuest = AuthHandler(statusCode);\r\n\t\t\tif(isGuest)\r\n\t\t\t\tthis.props.updateLogout();\r\n\t\t\t\t\t\r\n\t\t\tif(status === 'success'){\r\n\t\t\t\tthis.getUserList();\r\n\t\t\t}\r\n\t\t\ttoastr.error(message);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t    this.getUserList();\r\n\t  }\r\n\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<TableContainer users = {this.state.users} \r\n\t\t\t\t\t\t\t\tloaded = {this.state.usersLoaded} \r\n\t\t\t\t\t\t\t\tnoData = {this.state.noData} \r\n\t\t\t\t\t\t\t\tdeleteHandler = {this.deleteHandler} \r\n\t\t\t\t\t\t\t\tuserInfo = {this.props.userInfo}/>\r\n\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n\r\n}\r\n\r\nfunction TableContainer(props) {\r\n\treturn (<div className=\"mt-3\">\r\n\t<div className=\"row\">\r\n\t\t<div className=\"col-12\">\r\n\t\t\t<h2>Dashboard</h2>\r\n\t\t\t<Table users={props.users} loaded={props.loaded} noData = {props.noData} deleteHandler={props.deleteHandler}\r\n\t\t\tuserInfo = {props.userInfo}/>\r\n\t\t</div>\r\n\t</div>\t\t\t\t\r\n</div>);\r\n}\r\n\r\n\r\nfunction Table(props) {\r\n\r\n\tconst rows = (props.loaded) ? ((props.noData) ? (<tr><td>No data found</td></tr>) : (props.users.map(function(obj, index) {\r\n\t\treturn (<TableRow rowData={obj} key={obj.id} deleteHandler={props.deleteHandler} userInfo = {props.userInfo}/>)\r\n\t}))): (<tr><td>Loading...</td></tr>);\r\n\r\n\treturn (\r\n\t\t<table className=\"table\">\r\n\t\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<th>Id</th>\r\n\t\t\t\t<th>Name</th>\r\n\t\t\t\t<th>Email</th>\r\n\t\t\t\t<th>Role</th>\r\n\t\t\t\t<th></th>\r\n\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t{rows}\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t);\r\n}\r\n\r\nfunction TableRow(props) {\r\n\tconst {userInfo : {role}} = props;\r\n\treturn (<tr>\r\n\t\t\t\t<td>{props.rowData.id}</td>\r\n\t\t\t\t<td>{props.rowData.name}</td>\r\n\t\t\t\t<td>{props.rowData.email}</td>\r\n\t\t\t\t<td>{props.rowData.role}</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<Link to={`/users/profile/${props.rowData.id}`} className=\"btn btn-primary\">View</Link>\r\n\t\t\t\t\t{(role && (role === 'parent') && <button type=\"button\" className=\"btn btn-danger ml-1\" onClick={() => props.deleteHandler(props.rowData.id)}>Delete</button>)}\r\n\t\t\t\t\t\r\n\t\t\t\t</td>\r\n\r\n\t\t\t</tr>)\r\n}"],"sourceRoot":""}