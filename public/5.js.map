{"version":3,"sources":["webpack:///./resources/js/react/component/UserProfile.js"],"names":["UserProfile","props","loadingMsg","state","profile","name","email","role","id","file","fileUpload","handleFileUpload","bind","handleInputChange","handleSubmit","axiosPost","baseUrl","status","message","data","user","setState","prevState","toastr","error","e","target","files","value","preventDefault","formData","FormData","append","success","getProfile","match","params","userId","Component"],"mappings":"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","file":"5.js","sourcesContent":["import React, {Component} from 'react';\r\nimport {axiosPost, axiosPut, axiosGet, axiosDelete, baseUrl} from '../axiosCall';\r\nimport {\r\n\tLink\r\n  } from \"react-router-dom\";\r\nimport './../../../../node_modules/toastr/build/toastr.css';\r\n\r\nexport default class UserProfile extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst loadingMsg = 'Loading...'\r\n\t\tthis.state = {\r\n\t\t\tprofile: {\r\n\t\t\t\tname:loadingMsg,\r\n\t\t\t\temail:loadingMsg,\r\n\t\t\t\trole:loadingMsg,\r\n\t\t\t\tid:loadingMsg,\r\n\t\t\t\tfile:null\r\n\t\t\t},\r\n\t\t\tfileUpload : null\r\n\t\t}\r\n\r\n\t\tthis.handleFileUpload = this.handleFileUpload.bind(this);\r\n\t\tthis.handleInputChange = this.handleInputChange.bind(this);\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\t\r\n\t}\r\n\r\n\tasync getProfile(id = null) {\r\n\t\t\r\n\t\tconst {status, message, data = ''} = await axiosPost(`${baseUrl}/users/profile${(id) ? `/${id}` : ''}`);\r\n\t\tif(status == 'success'){\r\n\t\t\tconst {user:{name, email, role, id}} = data;\r\n\t\t\tthis.setState((prevState, props) => {\r\n\t\t\t\treturn ({profile :  {...prevState.profile, name, email, role, id}})\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\ttoastr.error(message);\r\n\t\t}\r\n\r\n/* \t\t.then(({status, message, data = ''}) => {\t\t\t\r\n\t\t\tif(status == 'success'){\r\n\t\t\t\tconst {user:{name, email, role, id}} = data;\r\n\t\t\t\tthis.setState((prevState, props) => {\r\n\t\t\t\t\treturn ({profile :  {...prevState.profile, name, email, role, id}})\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\ttoastr.error(message);\r\n\t\t\t}\r\n\t\t }); */\r\n\t}\r\n\r\n\thandleFileUpload(e) {\r\n\t\tconst target = e.target;\r\n\t\tthis.setState({fileUpload:target.files[0]});\r\n\t}\r\n\r\n\thandleInputChange(e) {\r\n\t\tconst target = e.target;\r\n\t\tthis.setState((prevState, props) => {\r\n\t\t\treturn ({profile: {...prevState.profile, name: target.value}});\r\n\t\t})\r\n\t}\r\n\r\n\tasync handleSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tlet formData = new FormData();\r\n\t\tconst {profile : {name, email, role, id} , fileUpload} = this.state;\r\n\t\tformData.append('name', name);\r\n\t\tformData.append('email', email);\r\n\t\tformData.append('role', role);\r\n\t\tformData.append('avatar', fileUpload);\r\n\t\tformData.append('id', id);\r\n\t\tformData.append('_method', 'PUT');\r\n\r\n\t\tconst {status, message, data = ''} = await axiosPost(`${baseUrl}/users/profile`, formData, {\r\n\t\t\t'content-type': 'multipart/form-data'\r\n\t\t});\r\n\t\tif(status === 'success'){\r\n\t\t\ttoastr.success(message);\r\n\t\t\tthis.getProfile(id);\r\n\t\t}else{\r\n\t\t\ttoastr.error(message);\r\n\t\t}\r\n\r\n/* \t\t.then(({status, message, data = ''}) => {\t\t\t\r\n\t\t\tif(status === 'success'){\r\n\t\t\t\ttoastr.success(message);\r\n\t\t\t\tthis.getProfile(id);\r\n\t\t\t}else{\r\n\t\t\t\ttoastr.error(message);\r\n\t\t\t}\r\n\t\t }); */\r\n\t\t\r\n\t}\r\n\r\n\r\n\tcomponentDidMount() {\r\n\t\r\n\t\tconst id = (this.props.match.params.userId) ? `${this.props.match.params.userId}` : '';\r\n\t    this.getProfile(id);\r\n\t  }\r\n\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"mt-5\">\r\n\t\t\t\t<h2>Profile</h2>\r\n\t\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t<img src=\"https://www.w3schools.com/bootstrap4/cinqueterre.jpg\" loading=\"lazy\" className=\"img-thumbnail\" alt=\"Cinque Terre\" width=\"304\" height=\"236\" />\t\t\t\t\t \r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t<label htmlFor=\"avatar\">Select avatar:</label>\r\n\t\t\t\t\t\t<input type=\"file\" \r\n\t\t\t\t\t\t\t\tclassName=\"form-control\" \r\n\t\t\t\t\t\t\t\tid=\"avatar\"\r\n\t\t\t\t\t\t\t\tonChange={this.handleFileUpload}\r\n\t\t\t\t\t\t\t\t/>\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t      <label htmlFor=\"userName\">Name:</label>\r\n\t\t\t\t      <input type=\"text\" \r\n\t\t\t      \t\t\t className=\"form-control\" \r\n\t\t\t\t\t\t\t   id=\"userName\"\r\n\t\t\t\t\t\t\t   name=\"userName\"\r\n\t\t\t\t\t\t\t   value={this.state.profile.name}\r\n\t\t\t\t\t\t\t   onChange={this.handleInputChange}\t\r\n\t\t\t      \t\t\t />\r\n\t\t\t\t    </div>\t\t\t\t  \r\n\t\t\t\t    <div className=\"form-group\">\r\n\t\t\t\t      <label htmlFor=\"email\">Email:</label>\r\n\t\t\t\t      <input type=\"text\" \r\n\t\t\t      \t\t\t className=\"form-control\" \r\n\t\t\t\t\t\t\t   id=\"email\" \r\n\t\t\t\t\t\t\t   value={this.state.profile.email}\r\n\t\t\t\t\t\t\t   readOnly\t\t\t      \t\t\t \r\n\t\t\t      \t\t\t />\r\n\t\t\t\t    </div>\r\n\t\t\t\t    <div className=\"form-group\">\r\n\t\t\t\t      <label htmlFor=\"role\">Role:</label>\r\n\t\t\t\t      <input type=\"text\" \r\n\t\t\t\t      \t\t className=\"form-control\" \r\n\t\t\t\t      \t\t id=\"role\" \r\n\t\t\t\t\t\t\t   value={this.state.profile.role}\r\n\t\t\t\t\t\t\t   readOnly\r\n\t\t\t\t\t\t\t   />\r\n\t\t\t\t    </div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">Update</button>\r\n\t\t\t\t\t\t<Link to=\"/dashboard\" className=\"btn btn-primary ml-3\">Back to Dashboard</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t</form> \t\t\t\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t);\r\n\t}\r\n\r\n}\r\n"],"sourceRoot":""}