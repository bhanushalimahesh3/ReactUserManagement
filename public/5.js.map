{"version":3,"sources":["webpack:///./resources/js/react/component/UserProfile.js"],"names":["UserProfile","props","loadingMsg","state","profile","name","email","role","id","file","fileUpload","handleFileUpload","bind","handleInputChange","handleSubmit","axiosPost","baseUrl","then","status","message","data","user","setState","prevState","toastr","error","e","target","files","value","preventDefault","formData","FormData","append","success","getProfile","match","params","userId","Component"],"mappings":"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","file":"5.js","sourcesContent":["import React, {Component} from 'react';\r\nimport {axiosPost, axiosPut, axiosGet, axiosDelete, baseUrl} from '../axiosCall';\r\nimport {\r\n\tLink\r\n  } from \"react-router-dom\";\r\nimport './../../../../node_modules/toastr/build/toastr.css';\r\n\r\nexport default class UserProfile extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst loadingMsg = 'Loading...'\r\n\t\tthis.state = {\r\n\t\t\tprofile: {\r\n\t\t\t\tname:loadingMsg,\r\n\t\t\t\temail:loadingMsg,\r\n\t\t\t\trole:loadingMsg,\r\n\t\t\t\tid:loadingMsg,\r\n\t\t\t\tfile:null\r\n\t\t\t},\r\n\t\t\tfileUpload : null\r\n\t\t}\r\n\r\n\t\tthis.handleFileUpload = this.handleFileUpload.bind(this);\r\n\t\tthis.handleInputChange = this.handleInputChange.bind(this);\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\t\r\n\t}\r\n\r\n\tgetProfile(id = null) {\r\n\t\t\r\n\t\taxiosPost(`${baseUrl}/users/profile${(id) ? `/${id}` : ''}`)\r\n\t\t.then(({status, message, data = ''}) => {\t\t\t\r\n\t\t\tif(status == 'success'){\r\n\t\t\t\tconst {user:{name, email, role, id}} = data;\r\n\t\t\t\tthis.setState((prevState, props) => {\r\n\t\t\t\t\treturn ({profile :  {...prevState.profile, name, email, role, id}})\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\ttoastr.error(message);\r\n\t\t\t}\r\n\t\t });\r\n\t}\r\n\r\n\thandleFileUpload(e) {\r\n\t\tconst target = e.target;\r\n\t\tthis.setState({fileUpload:target.files[0]});\r\n\t}\r\n\r\n\thandleInputChange(e) {\r\n\t\tconst target = e.target;\r\n\t\tthis.setState((prevState, props) => {\r\n\t\t\treturn ({profile: {...prevState.profile, name: target.value}});\r\n\t\t})\r\n\t}\r\n\r\n\thandleSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tlet formData = new FormData();\r\n\t\tconst {profile : {name, email, role, id} , fileUpload} = this.state;\r\n\t\tformData.append('name', name);\r\n\t\tformData.append('email', email);\r\n\t\tformData.append('role', role);\r\n\t\tformData.append('avatar', fileUpload);\r\n\t\tformData.append('id', id);\r\n\t\tformData.append('_method', 'PUT');\r\n\r\n\t\taxiosPost(`${baseUrl}/users/profile`, formData, {\r\n\t\t\t'content-type': 'multipart/form-data'\r\n\t\t})\r\n\t\t.then(({status, message, data = ''}) => {\t\t\t\r\n\t\t\tif(status === 'success'){\r\n\t\t\t\ttoastr.success(message);\r\n\t\t\t\tthis.getProfile(id);\r\n\t\t\t}else{\r\n\t\t\t\ttoastr.error(message);\r\n\t\t\t}\r\n\t\t });\r\n\t\t\r\n\t}\r\n\r\n\r\n\tcomponentDidMount() {\r\n\t\r\n\t\tconst id = (this.props.match.params.userId) ? `${this.props.match.params.userId}` : '';\r\n\t    this.getProfile(id);\r\n\t  }\r\n\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"mt-5\">\r\n\t\t\t\t<h2>Profile</h2>\r\n\t\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t<img src=\"https://www.w3schools.com/bootstrap4/cinqueterre.jpg\" loading=\"lazy\" className=\"img-thumbnail\" alt=\"Cinque Terre\" width=\"304\" height=\"236\" />\t\t\t\t\t \r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t<label htmlFor=\"avatar\">Select avatar:</label>\r\n\t\t\t\t\t\t<input type=\"file\" \r\n\t\t\t\t\t\t\t\tclassName=\"form-control\" \r\n\t\t\t\t\t\t\t\tid=\"avatar\"\r\n\t\t\t\t\t\t\t\tonChange={this.handleFileUpload}\r\n\t\t\t\t\t\t\t\t/>\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t      <label htmlFor=\"userName\">Name:</label>\r\n\t\t\t\t      <input type=\"text\" \r\n\t\t\t      \t\t\t className=\"form-control\" \r\n\t\t\t\t\t\t\t   id=\"userName\"\r\n\t\t\t\t\t\t\t   name=\"userName\"\r\n\t\t\t\t\t\t\t   value={this.state.profile.name}\r\n\t\t\t\t\t\t\t   onChange={this.handleInputChange}\t\r\n\t\t\t      \t\t\t />\r\n\t\t\t\t    </div>\t\t\t\t  \r\n\t\t\t\t    <div className=\"form-group\">\r\n\t\t\t\t      <label htmlFor=\"email\">Email:</label>\r\n\t\t\t\t      <input type=\"text\" \r\n\t\t\t      \t\t\t className=\"form-control\" \r\n\t\t\t\t\t\t\t   id=\"email\" \r\n\t\t\t\t\t\t\t   value={this.state.profile.email}\r\n\t\t\t\t\t\t\t   readOnly\t\t\t      \t\t\t \r\n\t\t\t      \t\t\t />\r\n\t\t\t\t    </div>\r\n\t\t\t\t    <div className=\"form-group\">\r\n\t\t\t\t      <label htmlFor=\"role\">Role:</label>\r\n\t\t\t\t      <input type=\"text\" \r\n\t\t\t\t      \t\t className=\"form-control\" \r\n\t\t\t\t      \t\t id=\"role\" \r\n\t\t\t\t\t\t\t   value={this.state.profile.role}\r\n\t\t\t\t\t\t\t   readOnly\r\n\t\t\t\t\t\t\t   />\r\n\t\t\t\t    </div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">Update</button>\r\n\t\t\t\t\t\t<Link to=\"/dashboard\" className=\"btn btn-primary ml-3\">Back to Dashboard</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t</form> \t\t\t\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t);\r\n\t}\r\n\r\n}\r\n"],"sourceRoot":""}