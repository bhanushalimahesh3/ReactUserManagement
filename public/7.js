(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{IXJ7:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),a=n.n(r),o=n("q1tI"),l=n.n(o),u=n("TuUD"),s=n("55Ip");n("0wR0");function c(e){return 401===e}var i=n("PSD3"),d=n.n(i);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,n,r,a,o,l){try{var u=e[o](l),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){m(o,r,a,l,u,"next",e)}function u(e){m(o,r,a,l,u,"throw",e)}l(void 0)}))}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return w}));var w=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=b(t).call(this,e))||"object"!==f(a)&&"function"!=typeof a?y(r):a).state={users:[],usersLoaded:!1,noData:!1},n.getUserList=n.getUserList.bind(y(n)),n.deleteHandler=n.deleteHandler.bind(y(n)),n}var n,r,o,s,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(r=[{key:"getUserList",value:(i=p(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)("".concat(u.d,"/users"));case 2:t=e.sent,n=t.status,r=t.message,o=t.data,c(t.statusCode)&&this.setState({isLoggedOut:!0}),"success"===n?this.setState({users:o,usersLoaded:!0,noData:!1}):(this.setState({users:o,usersLoaded:!0,noData:!0}),toastr.error(r));case 10:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"deleteHandler",value:(s=p(a.a.mark((function e(){var t,n,r,o,l=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:"",e.next=3,d.a.fire({title:"Are you sure?",text:"You want to delete",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"});case 3:if(!e.sent.value){e.next=17;break}return e.next=8,Object(u.a)("".concat(u.d,"/users/").concat(t));case 8:n=e.sent,r=n.status,o=n.message,n.data,c(n.statusCode)&&this.props.updateLogout(),"success"===r&&this.getUserList(),toastr.error(o);case 17:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"componentDidMount",value:function(){this.getUserList()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(E,{users:this.state.users,loaded:this.state.usersLoaded,noData:this.state.noData,deleteHandler:this.deleteHandler,userInfo:this.props.userInfo}))}}])&&h(n.prototype,r),o&&h(n,o),t}(o.Component);function E(e){return l.a.createElement("div",{className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h2",null,"Dashboard"),l.a.createElement(D,{users:e.users,loaded:e.loaded,noData:e.noData,deleteHandler:e.deleteHandler,userInfo:e.userInfo}))))}function D(e){var t=e.loaded?e.noData?l.a.createElement("tr",null,l.a.createElement("td",null,"No data found")):e.users.map((function(t,n){return l.a.createElement(g,{rowData:t,key:t.id,deleteHandler:e.deleteHandler,userInfo:e.userInfo})})):l.a.createElement("tr",null,l.a.createElement("td",null,"Loading..."));return l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Id"),l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Email"),l.a.createElement("th",null,"Role"),l.a.createElement("th",null))),l.a.createElement("tbody",null,t))}function g(e){var t=e.userInfo.role;return l.a.createElement("tr",null,l.a.createElement("td",null,e.rowData.id),l.a.createElement("td",null,e.rowData.name),l.a.createElement("td",null,e.rowData.email),l.a.createElement("td",null,e.rowData.role),l.a.createElement("td",null,l.a.createElement(s.b,{to:"/users/profile/".concat(e.rowData.id),className:"btn btn-primary"},"View"),t&&"parent"===t&&l.a.createElement("button",{type:"button",className:"btn btn-danger ml-1",onClick:function(){return e.deleteHandler(e.rowData.id)}},"Delete")))}}}]);