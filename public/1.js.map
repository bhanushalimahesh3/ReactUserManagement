{"version":3,"sources":["webpack:///./resources/js/react/component/AuthHandler.js","webpack:///./resources/js/react/component/Dashboard.js"],"names":["AuthHandler","statusCode","Dashboard","props","state","users","usersLoaded","noData","getUserList","bind","deleteHandler","axiosGet","baseUrl","status","message","data","isGuest","setState","isLoggedOut","toastr","error","id","Swal","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","confirmation","value","axiosDelete","updateLogout","userInfo","Component","TableContainer","loaded","Table","rows","map","obj","index","TableRow","role","rowData","name","email"],"mappings":"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","file":"1.js","sourcesContent":["export default function AuthHandler(statusCode) {\r\n    return (statusCode === 401);\r\n}","import React, {Component} from 'react';\r\nimport {axiosPost, axiosPut, axiosGet, axiosDelete, baseUrl} from './../axiosCall';\r\nimport {\r\n\tLink,\r\n\tRedirect\r\n  } from \"react-router-dom\";\r\n\r\nimport './../../../../node_modules/toastr/build/toastr.css';\r\nimport AuthHandler from './AuthHandler';\r\nimport Swal from 'sweetalert2';\r\n\r\nexport default class Dashboard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tusers : [],\r\n\t\t\tusersLoaded : false,\r\n\t\t\tnoData : false\r\n\t\t}\r\n\r\n\t\tthis.getUserList = this.getUserList.bind(this);\r\n\t\tthis.deleteHandler = this.deleteHandler.bind(this);\r\n\t}\r\n\r\n\tasync getUserList() {\r\n\r\n\t\tconst {status, message, data, statusCode} = await axiosGet(`${baseUrl}/users`);\r\n\t\tconst isGuest = AuthHandler(statusCode);\r\n\t\tif(isGuest)\r\n\t\t\tthis.setState({ isLoggedOut: true});\r\n\t\t\t\t\r\n\t\tif(status === 'success'){\r\n\t\t\tthis.setState({ users: data, usersLoaded: true, noData: false});\r\n\t\t}else{\r\n\t\t\tthis.setState({ users: data, usersLoaded: true, noData: true});\r\n\t\t\ttoastr.error(message);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tasync deleteHandler(id='') {\r\n\r\n\t\tconst {value:confirmation} = await Swal.fire({\r\n\t\t\t\ttitle: 'Are you sure?',\r\n\t\t\t\ttext: 'You want to delete',\r\n\t\t\t\ticon: 'warning',\r\n\t\t\t\tshowCancelButton: true,\r\n\t\t\t\tconfirmButtonText: 'Yes, delete it!',\r\n\t\t\t\tcancelButtonText: 'No, keep it'\r\n\t\t\t});\r\n\t\tif(confirmation){\r\n\t\t\tconst {status, message, data, statusCode} = await axiosDelete(`${baseUrl}/users/${id}`);\r\n\t\t\tconst isGuest = AuthHandler(statusCode);\r\n\t\t\tif(isGuest)\r\n\t\t\t\tthis.props.updateLogout();\r\n\t\t\t\t\t\r\n\t\t\tif(status === 'success'){\r\n\t\t\t\tthis.getUserList();\r\n\t\t\t}\r\n\t\t\ttoastr.error(message);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t    this.getUserList();\r\n\t  }\r\n\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<TableContainer users = {this.state.users} \r\n\t\t\t\t\t\t\t\tloaded = {this.state.usersLoaded} \r\n\t\t\t\t\t\t\t\tnoData = {this.state.noData} \r\n\t\t\t\t\t\t\t\tdeleteHandler = {this.deleteHandler} \r\n\t\t\t\t\t\t\t\tuserInfo = {this.props.userInfo}/>\r\n\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n\r\n}\r\n\r\nfunction TableContainer(props) {\r\n\treturn (<div className=\"mt-3\">\r\n\t<div className=\"row\">\r\n\t\t<div className=\"col-12\">\r\n\t\t\t<h2>Dashboard</h2>\r\n\t\t\t<Table users={props.users} loaded={props.loaded} noData = {props.noData} deleteHandler={props.deleteHandler}\r\n\t\t\tuserInfo = {props.userInfo}/>\r\n\t\t</div>\r\n\t</div>\t\t\t\t\r\n</div>);\r\n}\r\n\r\n\r\nfunction Table(props) {\r\n\r\n\tconst rows = (props.loaded) ? ((props.noData) ? (<tr><td>No data found</td></tr>) : (props.users.map(function(obj, index) {\r\n\t\treturn (<TableRow rowData={obj} key={obj.id} deleteHandler={props.deleteHandler} userInfo = {props.userInfo}/>)\r\n\t}))): (<tr><td>Loading...</td></tr>);\r\n\r\n\treturn (\r\n\t\t<table className=\"table\">\r\n\t\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<th>Id</th>\r\n\t\t\t\t<th>Name</th>\r\n\t\t\t\t<th>Email</th>\r\n\t\t\t\t<th>Role</th>\r\n\t\t\t\t<th></th>\r\n\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t{rows}\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t);\r\n}\r\n\r\nfunction TableRow(props) {\r\n\tconst {userInfo : {role}} = props;\r\n\treturn (<tr>\r\n\t\t\t\t<td>{props.rowData.id}</td>\r\n\t\t\t\t<td>{props.rowData.name}</td>\r\n\t\t\t\t<td>{props.rowData.email}</td>\r\n\t\t\t\t<td>{props.rowData.role}</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<Link to={`/users/profile/${props.rowData.id}`} className=\"btn btn-primary\">View</Link>\r\n\t\t\t\t\t{(role && (role === 'parent') && <button type=\"button\" className=\"btn btn-danger ml-1\" onClick={() => props.deleteHandler(props.rowData.id)}>Delete</button>)}\r\n\t\t\t\t\t\r\n\t\t\t\t</td>\r\n\r\n\t\t\t</tr>)\r\n}"],"sourceRoot":""}