{"version":3,"sources":["webpack:///./resources/js/react/component/AuthHandler.js","webpack:///./resources/js/react/component/Dashboard.js"],"names":["AuthHandler","statusCode","Dashboard","props","state","users","usersLoaded","noData","getUserList","bind","deleteHandler","axiosGet","baseUrl","then","status","message","data","isGuest","setState","isLoggedOut","toastr","error","id","Swal","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","result","value","axiosDelete","updateLogout","userInfo","Component","TableContainer","loaded","Table","rows","map","obj","index","TableRow","role","rowData","name","email"],"mappings":"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","file":"1.js","sourcesContent":["export default function AuthHandler(statusCode) {\r\n    return (statusCode === 401);\r\n}","import React, {Component} from 'react';\r\nimport {axiosPost, axiosPut, axiosGet, axiosDelete, baseUrl} from './../axiosCall';\r\nimport {\r\n\tSwitch,\r\n\tRoute,\r\n\tLink,\r\n\tRedirect,\r\n\tuseRouteMatch,\r\n\tuseParams\r\n  } from \"react-router-dom\";\r\n\r\nimport './../../../../node_modules/toastr/build/toastr.css';\r\nimport AuthHandler from './AuthHandler';\r\nimport Swal from 'sweetalert2';\r\nimport Header from './Header';\r\n\r\nexport default class Dashboard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tusers : [],\r\n\t\t\tusersLoaded : false,\r\n\t\t\t//isLoggedOut : false,\r\n\t\t\tnoData : false\r\n\t\t}\r\n\r\n\t\tthis.getUserList = this.getUserList.bind(this);\r\n\t\t//this.logoutHandler = this.logoutHandler.bind(this);\r\n\t\tthis.deleteHandler = this.deleteHandler.bind(this);\r\n\t}\r\n\r\n\tgetUserList() {\r\n\r\n\t\taxiosGet(`${baseUrl}/users`)\r\n\t\t.then(({status, message, data, statusCode}) => {\r\n\t\t\tconst isGuest = AuthHandler(statusCode);\r\n\t\t\tif(isGuest)\r\n\t\t\t\tthis.setState({ isLoggedOut: true});\r\n\t\t\t\t\t\r\n\t\t\tif(status === 'success'){\r\n\t\t\t\tthis.setState({ users: data, usersLoaded: true, noData: false});\r\n\t\t\t}else{\r\n\t\t\t\tthis.setState({ users: data, usersLoaded: true, noData: true});\r\n\t\t\t\ttoastr.error(message);\r\n\t\t\t}\r\n\t\t });\r\n\t}\r\n\r\n\t/*logoutHandler() {\r\n\t\taxiosGet(`${baseUrl}/logout`)\r\n\t\t.then(({status, message, data = ''}) => {\t\t\t\r\n\t\t\tif(status == 'success'){\r\n\t\t\t\tthis.setState({ isLoggedOut: true});\r\n\t\t\t}else{\r\n\t\t\t\ttoastr.error(message);\r\n\t\t\t}\r\n\t\t });\r\n\t}*/\r\n\r\n\tdeleteHandler(id='') {\r\n\r\n\t\tSwal.fire({\r\n\t\t\ttitle: 'Are you sure?',\r\n\t\t\ttext: 'You want to delete',\r\n\t\t\ticon: 'warning',\r\n\t\t\tshowCancelButton: true,\r\n\t\t\tconfirmButtonText: 'Yes, delete it!',\r\n\t\t\tcancelButtonText: 'No, keep it'\r\n\t\t  }).then((result) => {\r\n\t\t\t  if(result.value){\r\n\t\t\t\taxiosDelete(`${baseUrl}/users/${id}`)\r\n\t\t\t\t.then(({status, message, data, statusCode}) => {\r\n\t\t\t\t\tconst isGuest = AuthHandler(statusCode);\r\n\t\t\t\t\tif(isGuest)\r\n\t\t\t\t\t\tthis.props.updateLogout();\r\n\t\t\t\t\t\t//this.setState({ isLoggedOut: true});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\tif(status === 'success'){\r\n\t\t\t\t\t\tthis.getUserList();\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttoastr.error(message);\r\n\t\t\t\t });\r\n\t\t\t  }\r\n\t\t  })\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t    this.getUserList();\r\n\t  }\r\n\r\n\r\n\trender() {\r\n/*\t\tif(this.state.isLoggedOut)\r\n\t\t\treturn <Redirect to=\"/\" />*/\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{/* <Header logoutHandler = {this.logoutHandler}/> */}\r\n\t\t\t\t<TableContainer users = {this.state.users} \r\n\t\t\t\t\t\t\t\tloaded = {this.state.usersLoaded} \r\n\t\t\t\t\t\t\t\tnoData = {this.state.noData} \r\n\t\t\t\t\t\t\t\tdeleteHandler = {this.deleteHandler} \r\n\t\t\t\t\t\t\t\tuserInfo = {this.props.userInfo}/>\r\n\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n\r\n}\r\n\r\nfunction TableContainer(props) {\r\n\treturn (<div className=\"mt-3\">\r\n\t<div className=\"row\">\r\n\t\t<div className=\"col-12\">\r\n\t\t\t<h2>Dashboard</h2>\r\n\t\t\t<Table users={props.users} loaded={props.loaded} noData = {props.noData} deleteHandler={props.deleteHandler}\r\n\t\t\tuserInfo = {props.userInfo}/>\r\n\t\t</div>\r\n\t</div>\t\t\t\t\r\n</div>);\r\n}\r\n\r\n\r\nfunction Table(props) {\r\n\r\n\tconst rows = (props.loaded) ? ((props.noData) ? (<tr><td>No data found</td></tr>) : (props.users.map(function(obj, index) {\r\n\t\treturn (<TableRow rowData={obj} key={obj.id} deleteHandler={props.deleteHandler} userInfo = {props.userInfo}/>)\r\n\t}))): (<tr><td>Loading...</td></tr>);\r\n\r\n\treturn (\r\n\t\t<table className=\"table\">\r\n\t\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<th>Id</th>\r\n\t\t\t\t<th>Name</th>\r\n\t\t\t\t<th>Email</th>\r\n\t\t\t\t<th>Role</th>\r\n\t\t\t\t<th></th>\r\n\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t{rows}\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t);\r\n}\r\n\r\nfunction TableRow(props) {\r\n\tconst {userInfo : {role}} = props;\r\n\treturn (<tr>\r\n\t\t\t\t<td>{props.rowData.id}</td>\r\n\t\t\t\t<td>{props.rowData.name}</td>\r\n\t\t\t\t<td>{props.rowData.email}</td>\r\n\t\t\t\t<td>{props.rowData.role}</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<Link to={`/users/profile/${props.rowData.id}`} className=\"btn btn-primary\">View</Link>\r\n\t\t\t\t\t{(role && (role === 'parent') && <button type=\"button\" className=\"btn btn-danger ml-1\" onClick={() => props.deleteHandler(props.rowData.id)}>Delete</button>)}\r\n\t\t\t\t\t\r\n\t\t\t\t</td>\r\n\r\n\t\t\t</tr>)\r\n}"],"sourceRoot":""}